
# 数据库



1. 如何设计一个关系型数据库？
    - 划分成两大模块：**存储系统**和**程序实例**。
    - 存储系统模块，就是把数据持久化存储到硬件设备上。
    - 程序实例模块，就是对存储模块的管理，包括如下模块：
      - 存储管理（将数据逻辑关系转化成物理存储关系）
      - 缓存机制（用于优化执行效率）
      - SQL解析
      - 日志管理
      - 权限划分（用于对多用户权限管理）
      - 容灾机制
      - **索引管理**（用于优化查询效率）
      - **锁管理**（使数据库支持并发操作）


索引的相关问题：

1. 为什么要使用**索引**？
    - 避免全局扫描，提高查询的速度。
    - 因为在数据量很大的表中，全表扫描会非常慢。索引提供了快速定位的能力，所以提高了查询速度。

2. 什么样的信息能成为索引？
    - 主键、唯一键、普通键等。

3. 索引的数据结构？
    - 二叉查找树
    - B_Tree
    - B+_Tree （MySQL）
    - Hash

4. 密集索引与稀疏索引的区别？
    - **密集索引**文件中的每个索引码值都对应一个索引值
      - 不仅保存了索引列的信息，还保存了其他列的信息
      - 一个表只能有一个密集索引，它决定了排列顺序
    - **稀疏索引**文件只为索引码的某些值建立索引项
      - 仅保存了索引列的信息
      - 通过稀疏索引查询后，只获取到数据的主键，还需要根据主键查询数据
    - InnoDB：
      - 若一个主键被定义，则该主键所谓密集索引
      - 若没有主键被定义，则该表的第一个唯一非空索引作为密集索引
      - 若以上条件都不符合， InnoDB 内部会生成一个隐藏主键作为密集索引
      - 非空主键索引存储相关键位和其对应的主键值，包含两次查找

以上索引问题的衍生问题：

1. 如何定位并优化慢查询 SQL ？
    - 需要结合经验来说。下面只说出大概思路：（TODO:3-07
      - 根据慢日志定位慢查询 sql
      - 使用 explain 等工具分析 sql
      - 修改 sql 或者尽量让 sql 走索引

2. 联合索引的最左匹配原则的成因？



3. 索引是越多越好吗？










</br>





















</br>






















</br>






















</br>






















</br>






















</br>






















</br>






















</br>






















</br>


























































